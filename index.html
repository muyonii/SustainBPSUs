<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SustainBPSU | BPSU Environmental Sustainability Office</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    :root {
      --primary: #2e7d32;
      --primary-dark: #256428;
      --primary-light: #4caf50;
      --light-green: #e8f5e9;
      --light-gray: #f5f5f5;
      --text-dark: #333;
      --text-light: #666;
      --border: #e0e0e0;
    }
    
    body {
      background-color: white;
      color: var(--text-dark);
      line-height: 1.6;
      scrollbar-width: thin;
      scrollbar-color: var(--primary) #e0e0e0;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 8px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-dark);
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background-color: white;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 10px 0;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
      height: 60px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      flex-shrink: 0;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: var(--light-green);
    }

    .logo-icon i {
      font-size: 24px;
      color: var(--primary);
    }

    .logo-text {
      font-size: 24px;
      font-weight: bold;
      color: var(--primary);
    }

    .search-bar {
      flex-grow: 1;
      max-width: 500px;
      margin: 0 20px;
      position: relative;
      flex-shrink: 1;
    }

    .search-bar input {
      width: 100%;
      padding: 12px 20px 12px 45px;
      border-radius: 30px;
      border: 1px solid var(--border);
      font-size: 16px;
      background-color: var(--light-gray);
    }

    .search-bar i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-light);
    }

    .auth-buttons {
      display: flex;
      gap: 10px;
      flex-shrink: 0;
    }

    /* FIXED NAVIGATION STYLES */
    #user-menu {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-shrink: 0;
    }

    .nav-icons {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .nav-icon {
      position: relative;
      cursor: pointer;
      height: 40px;
      width: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .nav-icon i {
      font-size: 22px;
      color: var(--text-dark);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: #f44336;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .user-avatar-container {
      position: relative;
      flex-shrink: 0;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      object-fit: cover;
      border: 2px solid var(--primary-light);
    }

    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background-color: white;
      min-width: 200px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 1001;
      display: none;
      overflow: hidden;
    }

    .user-avatar-container:hover .user-dropdown {
      display: block;
    }

    .dropdown-item {
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      color: var(--text-dark);
      transition: background 0.2s;
    }

    .dropdown-item:hover {
      background-color: var(--light-gray);
    }

    .dropdown-item i {
      width: 20px;
      text-align: center;
    }

    /* Responsive adjustments */
    @media (max-width: 1100px) {
      .search-bar {
        max-width: 400px;
      }
    }

    @media (max-width: 992px) {
      .search-bar {
        max-width: 300px;
      }
    }

    @media (max-width: 768px) {
      .search-bar {
        max-width: 200px;
      }
      
      .logo-text {
        font-size: 20px;
      }
    }

    @media (max-width: 576px) {
      .search-bar {
        display: none;
      }
      
      .logo-text {
        display: none;
      }
      
      .nav-icons {
        gap: 10px;
      }
    }

    /* Page container */
    .page-container {
      display: none;
      min-height: 100vh;
      padding-top: 67px;
    }

    @media (max-width: 600px) {
      .page-container {
        padding-top: 120px;
      }
    }

    .page-container.active {
      display: block;
    }
    
    /* Landing Page */
    #landing-page {
      background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), 
                  url('https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=1500') center/cover;
    }
    
    /* Hero Section */
    .hero {
      display: flex;
      min-height: 70vh;
      align-items: center;
      justify-content: space-between;
      padding: 3rem;
      position: relative;
      background-color: white;
    }

    .hero-left {
      max-width: 50%;
      z-index: 1;
    }

    .hero-left h1 {
      font-size: 3rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.2;
      color: var(--primary-dark);
    }

    .hero-left p {
      font-size: 1.5rem;
      font-weight: 500;
      color: #444;
      max-width: 600px;
    }

    .counter {
      margin-top: 3rem;
      font-weight: 300;
      font-size: 3rem;
      line-height: 3rem;
    }

    .counter span {
      font-size: 1.2rem;
      color: #212529;
    }

    .hero-right {
      background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');
      background-size: cover;
      background-position: center;
      clip-path: polygon(20% 0, 100% 0, 100% 100%, 0 100%);
      width: 50%;
      height: 100%;
      position: absolute;
      right: 0;
      top: 0;
    }

    .btn {
      display: inline-block;
      padding: 12px 25px;
      font-size: 1.1rem;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      text-align: center;
      border: none;
      font-weight: 600;
    }
    
    .btn.cta {
      background-color: var(--primary);
      color: white;
      margin-top: 2rem;
      box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
    }

    .btn.cta:hover {
      background-color: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(46, 125, 50, 0.4);
    }

    /* Mission + Stats Section */
    .mission-stats {
      padding: 4rem 1rem;
      text-align: center;
      background-color: #f4fdf6;
    }

    .mission-header h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--primary-dark);
    }

    .mission-header .subheading {
      font-size: 1.2rem;
      color: #444;
      margin-bottom: 0.3rem;
    }

    .mission-header .why {
      font-size: 1rem;
      color: #666;
      max-width: 700px;
      margin: 0 auto 3rem;
    }

    .stat-cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      max-width: 320px;
      width: 100%;
      text-align: center;
      transition: transform 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-10px);
    }

    .stat-card .stat-number {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 0.25rem;
    }

    .stat-card .stat-label {
      font-size: 1rem;
      color: #212529;
      margin-bottom: 1rem;
    }

    .progress-bar {
      height: 12px;
      background-color: #e0e0e0;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .progress-bar .fill {
      height: 100%;
      background-color: var(--primary);
      width: 0;
      transition: width 0.5s ease;
    }

    .goal-label {
      font-size: 0.9rem;
      display: inline;
      color: #333;
    }

    .goal-number {
      display: inline;
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .btn.support {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 0.8rem 1.5rem;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s ease;
      margin-top: 1rem;
    }

    .btn.support:hover {
      background-color: var(--primary-dark);
    }

    .support-wrapper {
      margin-top: 2rem;
    }

    /* Start Greener Section */
    .start-greener {
      padding: 4rem 1rem;
      background-color: #fff;
    }

    .start-greener-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: auto;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .start-greener-left {
      flex: 1;
      min-width: 300px;
    }

    .start-greener-left h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .start-greener-left p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: #333;
      max-width: 500px;
    }

    .start-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .start-buttons .btn {
      padding: 12px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .start-buttons .primary {
      background-color: var(--primary);
      color: white;
    }

    .start-buttons .primary:hover {
      background-color: var(--primary-dark);
    }

    .start-buttons .secondary {
      background-color: #ddd;
      color: #333;
    }

    .start-buttons .secondary:hover {
      background-color: #bbb;
    }

    .start-greener-right {
      flex: 1;
      min-width: 300px;
      text-align: center;
    }

    .start-greener-right img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    /* Reforestation Section */
    .reforestation-section {
      padding: 4rem 1rem;
      background-color: #f4fdf6;
      text-align: center;
    }

    .reforest-heading {
      font-size: 2.5rem;
      max-width: 800px;
      margin: 0 auto 2rem;
      color: var(--primary-dark);
    }

    .reforest-cards {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      margin-bottom: 50px;
    }

    .reforest-card {
      padding: 20px;
      width: 100%;
      max-width: 350px;
      text-align: left;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }
    
    .reforest-card:hover {
      transform: translateY(-10px);
    }

    .reforest-icon-wrapper {
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }

    .reforest-icon {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
      margin-top: 5px;
      background: #e8f5e9;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: var(--primary);
    }

    .reforest-card h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: var(--primary-dark);
    }

    .reforest-card p {
      font-size: 1.1rem;
      color: #212529;
      margin: 0;
    }

    .map-placeholder {
      margin-top: 50px;
      padding: 30px;
      background-color: #e0f2f1;
      border-radius: 12px;
      color: #00695c;
      font-size: 1.2rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Organizations Section */
    .orgs-section {
      padding: 4rem 1rem;
      background-color: white;
    }

    .orgs-container {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
    }

    .orgs-left {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      text-align: left;
    }

    .orgs-left h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .orgs-left p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: #212529;
    }

    .orgs-btn {
      background-color: var(--primary);
      color: #fff;
      border: none;
      padding: 12px 24px;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .orgs-btn:hover {
      background-color: var(--primary-dark);
    }

    .orgs-right {
      flex: 1;
      min-width: 300px;
      padding: 20px;
    }

    .orgs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 16px;
    }

    .orgs-grid div {
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #2e7d32;
      height: 100px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      background-color: #e8f5e9;
      transition: transform 0.3s ease;
    }
    
    .orgs-grid div:hover {
      transform: scale(1.05);
      background-color: #c8e6c9;
    }

    /* Org Impact Carousel */
    .orgs-impact-section {
      background-color: white;
      padding: 4rem 1rem;
      text-align: center;
    }

    .impact-text h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .impact-text p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: #212529;
    }

    .create-forest-btn {
      background-color: var(--primary);
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1.2rem;
      cursor: pointer;
      margin-bottom: 40px;
      transition: background 0.3s;
    }

    .create-forest-btn:hover {
      background-color: var(--primary-dark);
    }

    .impact-carousel-wrapper {
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      display: flex;
      justify-content: flex-start;
      padding: 20px 0 40px;
      background-color: white;
    }

    .impact-carousel {
      display: flex;
      gap: 20px;
      scroll-behavior: smooth;
      padding: 0 20px;
    }

    .impact-card {
      scroll-snap-align: center;
      position: relative;
      width: 280px;
      height: 180px;
      border-radius: 16px;
      flex: 0 0 auto;
      overflow: hidden;
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0.9;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .impact-card:hover {
      transform: scale(1.05);
    }

    .impact-card.active {
      opacity: 1;
      transform: scale(1.05);
    }

    .card-bg {
      background: linear-gradient(135deg, #4caf50, #81c784);
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-size: cover;
      background-position: center;
    }

    .card-logo {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid white;
      object-fit: cover;
      background-color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: var(--primary);
    }

    .card-stats {
      position: absolute;
      bottom: 15px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      color: white;
      font-weight: bold;
    }

    .card-stats .number {
      font-size: 1.5em;
    }

    /* Quiz Section */
    .quiz-section {
      padding: 4rem 1rem;
      background: #f4fdf6;
      text-align: center;
    }

    .quiz-content {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      margin-bottom: 40px;
    }

    .quiz-text {
      flex: 1 1 300px;
      max-width: 500px;
      text-align: left;
    }

    .quiz-text h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .quiz-text p {
      font-size: 1.2rem;
      color: #212529;
      margin-bottom: 1.5rem;
    }

    .quiz-text .cta {
      margin-top: 10px;
      padding: 12px 24px;
      font-size: 1.2rem;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .quiz-text .cta:hover {
      background-color: var(--primary-dark);
    }

      .quiz-stats {
      flex: 1 1 300px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      max-width: 500px;
      max-height: 300px;
    }

    .quiz-stats .stat-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      font-weight: bold;
      font-size: 1rem;
      color: #2f855a;
      transition: transform 0.3s ease;
    }
    
    .quiz-stats .stat-card:hover {
      transform: scale(1.05);
    }

    .quiz-stats .stat-card .number {
      font-size: 2rem;
      color: var(--primary-dark);
      display: block;
      margin-bottom: 5px;
    }

    .quiz-ranking-section {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      padding: 30px 0;
      justify-content: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .quiz-ranking-left {
      max-width: 100%;
      flex: 1;
      min-width: 300px;
      text-align: left;
    }

    .quiz-ranking-title {
      font-size: 2rem;
      color: var(--primary-dark);
      margin-bottom: 8px;
    }

    .quiz-ranking-subtitle {
      font-size: 1.2rem;
      color: #4a5568;
    }

    .quiz-ranking-cards {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: flex-start;
      margin-top: 20px;
    }

    .ranking-card {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      flex: 1 1 300px;
      min-width: 280px;
      max-width: 400px;
      transition: transform 0.3s;
    }

    .ranking-card:hover {
      transform: translateY(-5px);
    }

    .ranking-items {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .ranking-entry {
      background-color: #f7fafc;
      border-radius: 10px;
      padding: 10px 14px;
      width: 100%;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      font-size: 0.95rem;
      transition: background 0.3s ease;
    }

    .ranking-entry:hover {
      background-color: #edf2f7;
    }

    .rank-icon {
      font-size: 1.5rem;
    }

    .ranking-card h3 {
      font-size: 1.2rem;
      color: var(--primary-dark);
      margin-bottom: 15px;
      border-bottom: 1px solid #edf2f7;
      padding-bottom: 8px;
    }

    /* Ecosystem Section */
    .ecosystem-section {
      padding: 4rem 1rem;
      background-color: white;
      text-align: center;
    }

    .ecosystem-header h2 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      color: var(--primary-dark);
    }

    .ecosystem-header p {
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
      color: #212529;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    .ecosystem-button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 1.2rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-bottom: 2rem;
    }

    .ecosystem-button:hover {
      background-color: var(--primary-dark);
    }

    .ecosystem-features {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background-color: white;
      border-radius: 12px;
      padding: 25px 20px;
      width: 100%;
      max-width: 280px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      text-align: center;
      transition: transform 0.3s ease;
    }

    .feature-card:hover {
      transform: translateY(-8px);
    }

    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: var(--primary);
    }

    .feature-card h3 {
      margin-bottom: 12px;
      font-size: 1.5rem;
      color: #333;
    }

    .feature-card p {
      font-size: 1.1rem;
      color: #666;
    }
    
    /* Social Feed Page */
    #social-feed-page {
      background-color: var(--light-gray);
      padding-bottom: 60px;
    }
    
    .feed-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 20px;
      padding: 20px;
    }
    
    .sidebar {
      background-color: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      height: fit-content;
    }
    
    .left-sidebar {
      position: sticky;
      top: 90px;
    }
    
    .trending-item {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .trending-item:hover {
      background-color: #f9f9f9;
    }
    
    .trending-item:last-child {
      border-bottom: none;
    }
    
    .trending-item .category {
      font-size: 12px;
      color: var(--text-light);
    }
    
    .trending-item .title {
      font-weight: 600;
      margin: 5px 0;
    }
    
    .trending-item .count {
      font-size: 12px;
      color: var(--text-light);
    }
    
    /* Main Feed */
    .main-feed {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .create-post {
      background-color: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .post-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .post-input {
      flex-grow: 1;
    }
    
    .post-input textarea {
      width: 100%;
      border: none;
      resize: none;
      font-size: 16px;
      min-height: 60px;
      padding: 10px;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    
    .post-input textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--primary-light);
    }
    
    .post-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 15px;
      border-top: 1px solid var(--border);
      margin-bottom: 10px;
    }
    
    .action-icons {
      display: flex;
      gap: 15px;
    }
    
    .action-icon {
      color: var(--primary);
      cursor: pointer;
      font-size: 18px;
    }
    
    .post-btn {
      padding: 8px 20px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .post-btn:hover {
      background-color: var(--primary-dark);
    }
    
    /* Posts */
    .post {
      background-color: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .post-user {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .post-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .post-user-info h3 {
      font-size: 16px;
      margin-bottom: 3px;
    }
    
    .post-user-info p {
      font-size: 14px;
      color: var(--text-light);
    }
    
    .post-content {
      margin-bottom: 15px;
      font-size: 16px;
      line-height: 1.5;
      padding: 10px 0;
    }
    
    .post-image {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 15px;
      max-height: 400px;
      object-fit: cover;
    }
    
    .post-stats {
      display: flex;
      justify-content: space-between;
      color: var(--text-light);
      font-size: 14px;
      padding: 10px 0;
      border-bottom: 1px solid var(--border);
      margin-bottom: 10px;
    }
    
    .post-actions {
      display: flex;
      justify-content: space-around;
    }
    
    .post-action {
      display: flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 5px;
      transition: background 0.2s;
    }
    
    .post-action:hover {
      background-color: var(--light-gray);
    }
    
    .post-action.active i {
      color: var(--primary);
    }
    
    .post-action.active .like {
      color: #f44336;
    }
    
    /* Profile Card */
    .profile-card {
      position: sticky;
      top: 90px;
    }
    
    .profile-header {
      position: relative;
      height: 150px;
      border-radius: 15px 15px 0 0;
      overflow: hidden;
      margin-bottom: 70px;
    }
    
    .cover-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .profile-avatar {
      z-index: 100;
      position: absolute;
      bottom: -50px;
      left: 20px;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 4px solid white;
      object-fit: cover;
    }
    
    .profile-info {
      padding: 0 20px 20px;
    }
    
    .profile-name {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .profile-handle {
      color: var(--text-light);
      margin-bottom: 15px;
    }
    
    .profile-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-number {
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 14px;
      color: var(--text-light);
    }
    
    .profile-bio {
      margin-bottom: 20px;
      line-height: 1.5;
      color: var(--text-light);
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 30px;
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
      width: 100%;
      display: block;
      text-align: center;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
    }
    
    /* Profile Page */
    #profile-page {
      background-color: var(--light-gray);
      padding: 20px;
    }
    
    .profile-page-container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .profile-banner {
      height: 250px;
      background: linear-gradient(120deg, #2e7d32, #81c784);
      position: relative;
    }
    
    .profile-banner .avatar {
      position: absolute;
      bottom: -50px;
      left: 50px;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      border: 5px solid white;
      object-fit: cover;
      background-color: #ddd;
    }
    
    .profile-actions {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
    }
    
    .profile-actions button {
      background: rgba(255,255,255,0.8);
      border: none;
      border-radius: 30px;
      padding: 8px 15px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .profile-details {
      padding: 80px 50px 30px;
    }
    
    .profile-name-large {
      font-size: 2rem;
      margin-bottom: 5px;
    }
    
    .profile-handle-large {
      font-size: 1.2rem;
      color: var(--text-light);
      margin-bottom: 15px;
    }
    
    .profile-bio-large {
      font-size: 1.1rem;
      margin-bottom: 25px;
      line-height: 1.6;
    }
    
    .profile-stats-large {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .stat-large {
      text-align: center;
    }
    
    .stat-large .number {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--primary);
    }
    
    .stat-large .label {
      font-size: 1rem;
      color: var(--text-light);
    }
    
    .profile-tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
    }
    
    .profile-tab {
      padding: 15px 25px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }
    
    .profile-tab.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
    }
    
    .tab-content {
      padding: 20px;
    }
    
    .tab-pane {
      display: none;
    }
    
    .tab-pane.active {
      display: block;
    }
    
    .activity-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .activity-card {
      background: var(--light-gray);
      border-radius: 10px;
      padding: 15px;
    }
    
    .activity-card h4 {
      margin-bottom: 10px;
    }
    
    .activity-card p {
      font-size: 0.9rem;
      color: var(--text-light);
    }
    
    .activity-meta {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 0.8rem;
      color: var(--text-light);
    }
    
    /* Footer */
    footer {
      background-color: var(--primary-dark);
      color: white;
      padding: 40px 0;
      margin-top: 60px;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      flex-wrap: wrap;
    }
    
    .footer-section {
      flex: 1;
      min-width: 300px;
      margin-bottom: 30px;
    }
    
    .footer-section h3 {
      margin-bottom: 20px;
      font-size: 18px;
      position: relative;
      padding-bottom: 10px;
    }
    
    .footer-section h3:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 2px;
      background-color: white;
    }
    
    .footer-links {
      list-style: none;
    }
    
    .footer-links li {
      margin-bottom: 10px;
    }
    
    .footer-links a {
      color: rgba(255,255,255,0.8);
      text-decoration: none;
      transition: all 0.3s;
    }
    
    .footer-links a:hover {
      color: white;
      padding-left: 5px;
    }
    
    .copyright {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      margin-top: 20px;
      color: rgba(255,255,255,0.7);
      font-size: 14px;
    }
    
    /* Responsive */
    @media (max-width: 1024px) {
      .hero-left h1 {
        font-size: 2rem;
      }
      
      .hero-right {
        width: 45%;
      }
    }

    @media (max-width: 992px) {
      .feed-container {
        grid-template-columns: 1fr;
      }
      
      .left-sidebar, .right-sidebar {
        position: static;
      }
      
      .header-content {
        flex-wrap: wrap;
      }
      
      .search-bar {
        order: 3;
        margin-top: 15px;
        max-width: 100%;
      }
    }

    @media (max-width: 768px) {
      .hero {
        flex-direction: column;
        padding: 1.5rem;
        min-height: auto;
      }
      
      .hero-left {
        max-width: 100%;
        margin-bottom: 2rem;
      }
      
      .hero-right {
        position: relative;
        width: 100%;
        height: 300px;
        clip-path: none;
        border-radius: 12px;
      }
      
      .stat-cards {
        flex-direction: column;
        align-items: center;
      }
      
      .start-greener-container {
        flex-direction: column;
      }
      
      .orgs-container {
        flex-direction: column;
      }
      
      .impact-carousel {
        gap: 15px;
      }
      
      .quiz-content {
        flex-direction: column;
        align-items: center;
      }
      
      .quiz-ranking-section {
        flex-direction: column;
      }
      
      .profile-details {
        padding: 80px 20px 20px;
      }
      
      .profile-banner .avatar {
        left: 20px;
      }
    }

    @media (max-width: 480px) {
      .hero-left h1 {
        font-size: 1.75rem;
      }
      
      .mission-header h2 {
        font-size: 1.75rem;
      }
      
      .start-buttons {
        flex-direction: column;
      }
      
      .reforest-heading {
        font-size: 1.5rem;
      }
      
      .orgs-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .quiz-stats {
        grid-template-columns: 1fr;
      }
      
      .feature-card {
        max-width: 100%;
      }
      
      .nav-icons {
        gap: 10px;
      }
      
      .logo-text {
        font-size: 20px;
      }
      
      .profile-stats-large {
        flex-direction: column;
        gap: 15px;
      }
    }
    
    /* NEW STYLES */
    
    /* Auth Buttons */
    .auth-buttons {
      display: flex;
      gap: 10px;
    }
    
    .auth-btn {
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }
    
    .auth-btn.login {
      background-color: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    
    .auth-btn.register {
      background-color: var(--primary);
      color: white;
    }
    
    .auth-btn:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    /* Settings Form */
    .settings-form {
      padding: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dark);
    }
    
    .form-group input, .form-group textarea {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 16px;
    }
    
    .form-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .form-actions button {
      padding: 10px 20px;
      border-radius: 6px;
      border: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .btn-save {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-cancel {
      background-color: #ddd;
      color: #333;
    }
    
    /* Login Page */
    #login-page {
    display: none;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    background-color: var(--light-gray);
    }
    #login-page.active,
#register-page.active {
  display: flex;
}
    
    .login-container {
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 400px;
      padding: 40px;
    }
    
    .login-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .login-header h2 {
      color: var(--primary-dark);
      margin-bottom: 10px;
    }
    
    .login-form .form-group {
      margin-bottom: 20px;
    }
    
    .login-options {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      font-size: 14px;
    }
    
    .remember-me {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .forgot-password {
      color: var(--primary);
      text-decoration: none;
    }
    
    .btn-login {
      width: 100%;
      padding: 12px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .btn-login:hover {
      background-color: var(--primary-dark);
    }
    
    .signup-link {
      text-align: center;
      margin-top: 20px;
      font-size: 14px;
    }
    
    .signup-link a {
      color: var(--primary);
      font-weight: 600;
      text-decoration: none;
    }
    
    /* Register Page */
    #register-page {
        display: none;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
        background-color: var(--light-gray);
    }
    
    .register-container {
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 400px;
      padding: 40px;
    }
    
    .register-header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .register-header h2 {
      color: var(--primary-dark);
      margin-bottom: 10px;
    }
    
    /* Image preview */
    #image-preview {
      display: none;
      margin-top: 15px;
      position: relative;
    }
    
    #preview-image {
      max-width: 100%;
      max-height: 200px;
      border-radius: 8px;
    }
    
    #remove-image {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255,255,255,0.8);
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      font-size: 16px;
    }
    
    /* Tree Planting Events Page */
    #events-page {
      padding: 100px 20px;
      background-color: var(--light-gray);
    }
    
    .events-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .events-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .events-header h1 {
      font-size: 2.5rem;
      color: var(--primary-dark);
    }
    
    .create-event-btn {
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 30px;
      padding: 12px 25px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.3s;
    }
    
    .create-event-btn:hover {
      background-color: var(--primary-dark);
    }
    
    .events-filters {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .filter-group {
      flex: 1;
      min-width: 200px;
    }
    
    .filter-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dark);
    }
    
    .filter-group select,
    .filter-group input {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 16px;
      background-color: white;
    }
    
    .events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 25px;
    }
    
    .event-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .event-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    
    .event-image {
      height: 200px;
      background-color: #e0f2e9;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .event-status {
      position: absolute;
      top: 15px;
      right: 15px;
      background: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.85rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .event-status.upcoming {
      background-color: #4caf50;
      color: white;
    }
    
    .event-status.in-progress {
      background-color: #ff9800;
      color: white;
    }
    
    .event-status.completed {
      background-color: #9e9e9e;
      color: white;
    }
    
    .event-details {
      padding: 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .event-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--primary-dark);
    }
    
    .event-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .event-meta-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-light);
      font-size: 0.95rem;
    }
    
    .event-meta-item i {
      color: var(--primary);
    }
    
    .event-description {
      color: var(--text-dark);
      margin-bottom: 20px;
      flex: 1;
    }
    
    .event-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-top: 15px;
      border-top: 1px solid var(--border);
    }
    
    .stat-item {
      text-align: center;
      flex: 1;
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.85rem;
      color: var(--text-light);
    }
    
    .event-actions {
      display: flex;
      gap: 10px;
    }
    
    .event-btn {
      flex: 1;
      padding: 10px 15px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s;
      text-align: center;
    }
    
    .event-btn.join {
      background-color: var(--primary);
      color: white;
    }
    
    .event-btn.join:hover {
      background-color: var(--primary-dark);
    }
    
    .event-btn.view {
      background-color: white;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    
    .event-btn.view:hover {
      background-color: var(--light-green);
    }
    
    .event-btn.joined {
      background-color: #e8f5e9;
      color: var(--primary-dark);
      border: 2px solid var(--primary);
    }
    
    .event-btn.joined:hover {
      background-color: #dcedc8;
    }
    
    /* Event Details Page */
    #event-detail-page {
      padding: 30px 20px;
      background-color: var(--light-gray);
    }
    
    .event-detail-container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    .event-banner {
      height: 350px;
      background-color: #c8e6c9;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .event-header {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      padding: 30px;
      color: white;
    }
    
    .event-title-large {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
    }
    
    .event-subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      margin-bottom: 15px;
    }
    
    .event-header-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 10px;
    }
    
    .event-detail-content {
      padding: 30px;
    }
    
    .event-section {
      margin-bottom: 40px;
    }
    
    .event-section h2 {
      font-size: 1.8rem;
      color: var(--primary-dark);
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--light-green);
    }
    
    .event-description-detail {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--text-dark);
      margin-bottom: 30px;
    }
    
    .event-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .info-card {
      background: var(--light-green);
      border-radius: 10px;
      padding: 20px;
    }
    
    .info-card h3 {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: var(--primary-dark);
    }
    
    .info-card p {
      font-size: 1.1rem;
      color: var(--text-dark);
    }
    
    .participants-section {
      background: #f9f9f9;
      border-radius: 10px;
      padding: 20px;
    }
    
    .participants-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .participants-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
    }
    
    .participant-card {
      text-align: center;
    }
    
    .participant-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: #e0f2e9;
      margin: 0 auto 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: var(--primary);
    }
    
    .participant-name {
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .participant-role {
      font-size: 0.8rem;
      color: var(--text-light);
    }
    
    .action-section {
      display: flex;
      gap: 15px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      margin-top: 30px;
    }
    
    .action-btn {
      flex: 1;
      padding: 15px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s;
      text-align: center;
      font-size: 1.1rem;
    }
    
    .action-btn.join {
      background-color: var(--primary);
      color: white;
    }
    
    .action-btn.join:hover {
      background-color: var(--primary-dark);
    }
    
    .action-btn.share {
      background-color: white;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    
    .action-btn.share:hover {
      background-color: var(--light-green);
    }
    
    .action-btn.joined {
      background-color: #e8f5e9;
      color: var(--primary-dark);
      border: 2px solid var(--primary);
    }
    
    .action-btn.joined:hover {
      background-color: #dcedc8;
    }
    
    /* Create Event Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 15px;
      width: 90%;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .modal-header h2 {
      font-size: 1.8rem;
      color: var(--primary-dark);
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-dark);
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 16px;
    }
    .avatar-preview-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .avatar-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
    }

    .btn-upload {
      background-color: var(--primary-light);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
    }
    
    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }
    
    .form-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .form-row .form-group {
      flex: 1;
      margin-bottom: 0;
    }
    
    .modal-footer {
      padding: 20px;
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      border-top: 1px solid var(--border);
    }
    
    .modal-btn {
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s;
    }
    
    .modal-btn.cancel {
      background-color: #f5f5f5;
      color: var(--text-dark);
    }
    
    .modal-btn.cancel:hover {
      background-color: #e0e0e0;
    }
    
    .modal-btn.submit {
      background-color: var(--primary);
      color: white;
    }
    
    .modal-btn.submit:hover {
      background-color: var(--primary-dark);
    }
    
    /* Responsive adjustments */
    @media (max-width: 992px) {
      .events-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }
      
      .event-banner {
        height: 300px;
      }
    }
    
    @media (max-width: 768px) {
      .event-title-large {
        font-size: 2rem;
      }
      
      .events-header h1 {
        font-size: 2rem;
      }
      
      .event-banner {
        height: 250px;
      }
      
      .event-header {
        padding: 20px;
      }
      
      .action-section {
        flex-direction: column;
      }
      
      .form-row {
        flex-direction: column;
        gap: 15px;
      }
    }
    
    @media (max-width: 576px) {
      .events-grid {
        grid-template-columns: 1fr;
      }
      
      .event-meta {
        flex-direction: column;
        gap: 10px;
      }
      
      .event-banner {
        height: 200px;
      }
      
      .event-title-large {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <a href="#" class="logo" onclick="showPage('landing-page')">
        <div class="logo-icon">
          <i class="fas fa-leaf"></i>
        </div>
        <div class="logo-text">SustainBPSU</div>
      </a>
      
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search for people, organizations, or eco topics...">
      </div>
      
      <!-- Auth Buttons (shown when not logged in) -->
      <div class="auth-buttons" id="auth-buttons">
        <button class="auth-btn login" onclick="showPage('login-page')">Log in</button>
        <button class="auth-btn register" onclick="showPage('register-page')">Register</button>
      </div>
      
      <!-- User Menu (shown when logged in) -->
      <div id="user-menu" style="display: none;">
        <div class="nav-icons">
          <div class="nav-icon" data-target="landing-page">
            <i class="fas fa-home"></i>
          </div>
          <div class="nav-icon" data-target="social-feed-page">
            <i class="fas fa-users"></i>
          </div>
          <div class="nav-icon" data-target="events-page">
            <i class="fas fa-calendar-alt"></i>
          </div>
          
          <div class="user-avatar-container">
            <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="User" class="user-avatar" id="header-avatar">
            <div class="user-dropdown">
              <a href="#" class="dropdown-item" onclick="showPage('profile-page')">
                <i class="fas fa-user"></i> Profile
              </a>
              <a href="#" class="dropdown-item" onclick="showPage('profile-page'); switchTab('settings')">
                <i class="fas fa-cog"></i> Settings
              </a>
              <a href="#" class="dropdown-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Landing Page -->
  <div id="landing-page" class="page-container active">
    <section class="hero">
      <div class="hero-left">
        <h1>Join BPSU to build<br>a greener campus</h1>
        <p>Empowering students, organizations, and admins to take real action for sustainability — one tree, one cleanup, one habit at a time.</p>
        <button class="btn cta" onclick="logTree()">Log a Tree</button>
        <div class="counter">
          <strong id="tree-counter">12,450</strong><br>
          <span>trees planted across BPSU campuses</span>
        </div>
      </div>
      <div class="hero-right"></div>
    </section>

    <!-- Mission + Stats Section -->
    <section class="mission-stats">
      <div class="mission-header">
        <h2>Our Mission: A Sustainable BPSU</h2>
        <p class="subheading">Tracking progress through measurable environmental actions</p>
        <p class="why">Every small action across our campuses contributes to our collective environmental impact.</p>
      </div>

      <div class="stat-cards">
        <div class="stat-card">
          <h3 class="stat-number">12,450</h3>
          <p class="stat-label">Total Trees Planted</p>
          <div class="progress-bar"><div class="fill" style="width: 62%"></div></div>
          <p class="goal-label">This month's goal:</p>
          <p class="goal-number">20,000</p>
        </div>

        <div class="stat-card">
          <h3 class="stat-number">3,780 kg</h3>
          <p class="stat-label">Waste Reduced</p>
          <div class="progress-bar"><div class="fill" style="width: 45%"></div></div>
          <p class="goal-label">This month's goal:</p>
          <p class="goal-number">8,000 kg</p>
        </div>

        <div class="stat-card">
          <h3 class="stat-number">6,320 kg</h3>
          <p class="stat-label">Carbon Emissions Reduced</p>
          <div class="progress-bar"><div class="fill" style="width: 31%"></div></div>
          <p class="goal-label">This month's goal:</p>
          <p class="goal-number">20,000 kg</p>
        </div>
      </div>

      <div class="support-wrapper">
        <button class="btn support">Support Our Mission</button>
      </div>
    </section>

    <!-- Start Greener Section -->
    <section class="start-greener">
      <div class="start-greener-container">
        <div class="start-greener-left">
          <h2>Join the Campus Sustainability Movement</h2>
          <p>Whether you're a student or organization, your actions create real change. Start contributing to BPSU's green transformation today.</p>
          <div class="start-buttons">
            <button class="btn primary" onclick="showPage('social-feed-page')">Student Sign Up</button>
            <button class="btn secondary" onclick="showPage('social-feed-page')">Organization Registration</button>
          </div>
        </div>
        <div class="start-greener-right">
          <img src="https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80" alt="Green campus" style="border-radius: 12px;">
        </div>
      </div>
    </section>

    <!-- Reforestation Section -->
    <section class="reforestation-section">
      <h2 class="reforest-heading">Our Campus Reforestation Strategy</h2>
      <div class="reforest-cards">
        <div class="reforest-card">
          <div class="reforest-icon-wrapper">
            <div class="reforest-icon"><i class="fas fa-tree"></i></div>
            <div>
              <h3>Combat Campus Deforestation</h3>
              <p>Restore green spaces across BPSU campuses through strategic tree planting.</p>
            </div>
          </div>
        </div>

        <div class="reforest-card">
          <div class="reforest-icon-wrapper">
            <div class="reforest-icon"><i class="fas fa-cloud-sun"></i></div>
            <div>
              <h3>Reduce Carbon Footprint</h3>
              <p>Each tree contributes to BPSU's commitment to carbon neutrality.</p>
            </div>
          </div>
        </div>

        <div class="reforest-card">
          <div class="reforest-icon-wrapper">
            <div class="reforest-icon"><i class="fas fa-users"></i></div>
            <div>
              <h3>Engage Campus Communities</h3>
              <p>Collaborate with student groups and faculty for maximum impact.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="map-placeholder">
        <p>🌳 Campus Tree Planting Tracker (Coming Soon)</p>
      </div>
    </section>

    <!-- Organizations Section -->
    <section class="orgs-section">
      <div class="orgs-container">
        <div class="orgs-left">
          <h2>Campus Organizations Driving Change</h2>
          <p>Student and faculty organizations across BPSU campuses are leading sustainability initiatives.</p>
          <button class="orgs-btn" onclick="showPage('social-feed-page')">Register Your Organization</button>
        </div>
        <div class="orgs-right">
          <div class="orgs-grid">
            <div>Env Club</div>
            <div>Bio Society</div>
            <div>Eco Eng</div>
            <div>Green Chem</div>
            <div>Sustain IT</div>
            <div>Eco Leaders</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Org Impact Carousel -->
    <section class="orgs-impact-section">
      <div class="impact-text">
        <h2>Organizations Making a Difference</h2>
        <p>Discover how campus groups are transforming BPSU's environment</p>
        <button class="create-forest-btn" onclick="showPage('social-feed-page')">Start Your Organization's Project</button>
      </div>

      <div class="impact-carousel-wrapper">
        <div class="impact-carousel" id="impact-carousel">
          <div class="impact-card">
            <div class="card-bg"></div>
            <div class="card-logo"><i class="fas fa-seedling"></i></div>
            <div class="card-stats">
              <div class="left-stat">
                <span class="number">200</span><br>Trees Planted
              </div>
              <div class="right-stat">
                <span class="number">200</span><br>kg CO₂ Offset
              </div>
            </div>
          </div>

          <div class="impact-card">
            <div class="card-bg"></div>
            <div class="card-logo"><i class="fas fa-leaf"></i></div>
            <div class="card-stats">
              <div class="left-stat">
                <span class="number">320</span><br>Trees Planted
              </div>
              <div class="right-stat">
                <span class="number">280</span><br>kg CO₂ Offset
              </div>
            </div>
          </div>

          <div class="impact-card">
            <div class="card-bg"></div>
            <div class="card-logo"><i class="fas fa-recycle"></i></div>
            <div class="card-stats">
              <div class="left-stat">
                <span class="number">120</span><br>Trees Planted
              </div>
              <div class="right-stat">
                <span class="number">150</span><br>kg CO₂ Offset
              </div>
            </div>
          </div>
          
          <div class="impact-card">
            <div class="card-bg"></div>
            <div class="card-logo"><i class="fas fa-tree"></i></div>
            <div class="card-stats">
              <div class="left-stat">
                <span class="number">180</span><br>Trees Planted
              </div>
              <div class="right-stat">
                <span class="number">210</span><br>kg CO₂ Offset
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Quiz Section -->
    <section class="quiz-section">
      <div class="quiz-content">
        <div class="quiz-text">
          <h2>Eco Knowledge Challenge</h2>
          <p>Test your sustainability knowledge, earn recognition, and climb the leaderboard</p>
          <button class="btn cta" onclick="showPage('profile-page')">Take the Sustainability Quiz</button>
        </div>

        <div class="quiz-stats">
          <div class="stat-card">
            <span class="number">520</span>
            <div>Total Medals Earned</div>
          </div>
          <div class="stat-card">
            <span class="number">134</span>
            <div>Certificates Awarded</div>
          </div>
          <div class="stat-card">
            <span class="number">980</span>
            <div>Quizzes Completed</div>
          </div>
          <div class="stat-card">
            <span class="number">412</span>
            <div>Active Participants</div>
          </div>
        </div>
      </div>

      <div class="quiz-ranking-section">
        <div class="quiz-ranking-left">
          <h2 class="quiz-ranking-title">Campus Sustainability Leaders</h2>
          <p class="quiz-ranking-subtitle">Top performers in environmental knowledge and action</p>
        </div>

        <div class="quiz-ranking-cards">
          <div class="ranking-card">
            <h3>👤 Top Student Champions</h3>
            <div class="ranking-items">
              <div class="ranking-entry">
                <span class="rank-icon">🥇</span>
                <div><strong>Ana Lopez</strong><br><span>12 Medals</span></div>
              </div>
              <div class="ranking-entry">
                <span class="rank-icon">🥈</span>
                <div><strong>Carlo Reyes</strong><br><span>10 Medals</span></div>
              </div>
              <div class="ranking-entry">
                <span class="rank-icon">🥉</span>
                <div><strong>Bea Santos</strong><br><span>9 Medals</span></div>
              </div>
            </div>
          </div>

          <div class="ranking-card">
            <h3>🏛️ Top Performing Organizations</h3>
            <div class="ranking-items">
              <div class="ranking-entry">
                <span class="rank-icon">🥇</span>
                <div><strong>Environmental Society</strong><br><span>42 Medals</span></div>
              </div>
              <div class="ranking-entry">
                <span class="rank-icon">🥈</span>
                <div><strong>Biology Club</strong><br><span>38 Medals</span></div>
              </div>
              <div class="ranking-entry">
                <span class="rank-icon">🥉</span>
                <div><strong>Engineering Guild</strong><br><span>35 Medals</span></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Ecosystem Section -->
    <section class="ecosystem-section">
      <div class="ecosystem-header">
        <h2>SustainBPSU Features</h2>
        <p>Tools designed for student engagement and environmental impact</p>
        <button class="ecosystem-button" onclick="showPage('social-feed-page')">Explore All Features</button>
      </div>

      <div class="ecosystem-features">
        <div class="feature-card">
          <div class="feature-icon">🌱</div>
          <h3>Tree Planting Tracker</h3>
          <p>Monitor reforestation efforts across BPSU with real-time data.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🗑️</div>
          <h3>Waste Management</h3>
          <p>Log cleanup drives and track waste collection milestones.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🗺️</div>
          <h3>Campus Tree Map</h3>
          <p>Explore tree planting projects across all BPSU locations.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">🏆</div>
          <h3>Sustainability Rewards</h3>
          <p>Earn recognition for completing eco-activities and quizzes.</p>
        </div>
      </div>
    </section>
  </div>
  
  <!-- Social Feed Page -->
  <div id="social-feed-page" class="page-container">
    <div class="feed-container">
      <!-- Left Sidebar -->
      <div class="sidebar left-sidebar">  
        <h3 class="sidebar-title">Eco Trends</h3>
        <div class="trending-item">
          <div class="category">Environment · Trending</div>
          <div class="title">#PlantATreeDay</div>
          <div class="count">5,420 posts</div>
        </div>
        <div class="trending-item">
          <div class="category">Sustainability · Trending</div>
          <div class="title">#ZeroWasteCampus</div>
          <div class="count">3,210 posts</div>
        </div>
        <div class="trending-item">
          <div class="category">Technology · Trending</div>
          <div class="title">#GreenTech</div>
          <div class="count">2,150 posts</div>
        </div>
        <div class="trending-item">
          <div class="category">Events · Trending</div>
          <div class="title">#CleanUpDrive</div>
          <div class="count">1,890 posts</div>
        </div>
        <div class="trending-item">
          <div class="category">Community · Trending</div>
          <div class="title">#EcoWarriors</div>
          <div class="count">1,450 posts</div>
        </div>
      </div>
      
      <!-- Main Feed -->
      <div class="main-feed">
        <!-- Create Post -->
        <div class="create-post">
          <div class="post-header">
            <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="User" class="user-avatar" id="post-user-avatar">
            <div class="post-input">
              <textarea id="post-content" placeholder="What's happening in the sustainability world?"></textarea>
            </div>
          </div>
          <div class="post-actions">
            <div class="action-icons">
              <div class="action-icon" onclick="document.getElementById('image-input').click()">
                <i class="fas fa-image"></i>
                <input type="file" id="image-input" accept="image/*" style="display: none">
              </div>
              <div class="action-icon">
                <i class="fas fa-video"></i>
              </div>
              <div class="action-icon">
                <i class="fas fa-poll"></i>
              </div>
              <div class="action-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
            </div>
            <button class="post-btn" onclick="createPost()">Post</button>
          </div>
          <div id="image-preview" style="display: none; margin-top: 15px;">
            <img id="preview-image" src="" alt="Preview" style="max-width: 100%; max-height: 200px; border-radius: 8px;">
            <button id="remove-image" onclick="removeImage()">Remove</button>
          </div>
        </div>
        
        <!-- Posts Container -->
        <div id="posts-container"></div>
      </div>
      
      <!-- Right Sidebar -->
      <div class="sidebar right-sidebar profile-card">
        <div class="profile-header">
          <img src="https://images.unsplash.com/photo-1472289065668-ce650ac443d2?auto=format&fit=crop&w=600" alt="Cover" class="cover-photo">
          <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="User" class="profile-avatar" id="profile-sidebar-avatar">
        </div>
        <div class="profile-info">
          <div class="profile-name" id="profile-sidebar-name"></div>
          <div class="profile-handle" id="profile-sidebar-handle"></div>
          
          <div class="profile-stats">
            <div class="stat">
              <div class="stat-number" id="profile-posts-count">0</div>
              <div class="stat-label">Posts</div>
            </div>
            <div class="stat">
              <div class="stat-number">0</div>
              <div class="stat-label">Following</div>
            </div>
            <div class="stat">
              <div class="stat-number">0</div>
              <div class="stat-label">Followers</div>
            </div>
          </div>
          
          <div class="profile-bio" id="profile-sidebar-bio">
            Join SustainBPSU to start contributing to a greener campus!
          </div>
          
          <button class="btn btn-primary" onclick="showPage('profile-page')">Edit Profile</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Events Page -->
  <div id="events-page" class="page-container">
    <div class="events-container">
      <div class="events-header">
        <h1>Tree Planting Events</h1>
        <button class="create-event-btn" onclick="openCreateEventModal()">
          <i class="fas fa-plus"></i> Create Event
        </button>
      </div>
      
      <div class="events-filters">
        <div class="filter-group">
          <label for="campus-filter">Campus</label>
          <select id="campus-filter">
            <option value="all">All Campuses</option>
            <option value="main">Main Campus</option>
            <option value="north">North Campus</option>
            <option value="south">South Campus</option>
            <option value="east">East Campus</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="date-filter">Date</label>
          <select id="date-filter">
            <option value="all">Any Date</option>
            <option value="week">This Week</option>
            <option value="month">This Month</option>
            <option value="upcoming">Upcoming</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="status-filter">Status</label>
          <select id="status-filter">
            <option value="all">All Status</option>
            <option value="upcoming">Upcoming</option>
            <option value="in-progress">In Progress</option>
            <option value="completed">Completed</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="search-filter">Search</label>
          <input type="text" id="search-filter" placeholder="Event name or location...">
        </div>
      </div>
      
      <div class="events-grid">
        <!-- Event Card 1 -->
        <div class="event-card">
          <div class="event-image" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');">
            <div class="event-status upcoming">Upcoming</div>
          </div>
          <div class="event-details">
            <h3 class="event-title">Main Campus Tree Planting Day</h3>
            <div class="event-meta">
              <div class="event-meta-item">
                <i class="fas fa-calendar"></i> Sat, Oct 28, 2023
              </div>
              <div class="event-meta-item">
                <i class="fas fa-clock"></i> 8:00 AM - 12:00 PM
              </div>
              <div class="event-meta-item">
                <i class="fas fa-map-marker-alt"></i> Main Quad
              </div>
            </div>
            <p class="event-description">Join us for a campus-wide tree planting event. We'll be planting 50 native trees to enhance our campus green spaces.</p>
            <div class="event-stats">
              <div class="stat-item">
                <div class="stat-value">50</div>
                <div class="stat-label">Trees</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">24/50</div>
                <div class="stat-label">Participants</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">3</div>
                <div class="stat-label">Days Left</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="event-btn join" onclick="joinEvent(this)">Join Event</button>
              <button class="event-btn view" onclick="viewEventDetails()">Details</button>
            </div>
          </div>
        </div>
        
        <!-- Event Card 2 -->
        <div class="event-card">
          <div class="event-image" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');">
            <div class="event-status in-progress">In Progress</div>
          </div>
          <div class="event-details">
            <h3 class="event-title">North Campus Reforestation</h3>
            <div class="event-meta">
              <div class="event-meta-item">
                <i class="fas fa-calendar"></i> Ongoing until Nov 15
              </div>
              <div class="event-meta-item">
                <i class="fas fa-clock"></i> Flexible hours
              </div>
              <div class="event-meta-item">
                <i class="fas fa-map-marker-alt"></i> North Woods
              </div>
            </div>
            <p class="event-description">Help us restore the North Woods area by planting native tree species. Volunteers can join anytime during the project.</p>
            <div class="event-stats">
              <div class="stat-item">
                <div class="stat-value">120</div>
                <div class="stat-label">Trees</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">42/60</div>
                <div class="stat-label">Participants</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">18</div>
                <div class="stat-label">Days Left</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="event-btn join" onclick="joinEvent(this)">Join Event</button>
              <button class="event-btn view" onclick="viewEventDetails()">Details</button>
            </div>
          </div>
        </div>
        
        <!-- Event Card 3 -->
        <div class="event-card">
          <div class="event-image" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');">
            <div class="event-status completed">Completed</div>
          </div>
          <div class="event-details">
            <h3 class="event-title">South Campus Arbor Day</h3>
            <div class="event-meta">
              <div class="event-meta-item">
                <i class="fas fa-calendar"></i> Oct 10, 2023
              </div>
              <div class="event-meta-item">
                <i class="fas fa-clock"></i> 9:00 AM - 1:00 PM
              </div>
              <div class="event-meta-item">
                <i class="fas fa-map-marker-alt"></i> South Lawn
              </div>
            </div>
            <p class="event-description">Our annual Arbor Day celebration where we planted 75 trees around South Campus. Thanks to all who participated!</p>
            <div class="event-stats">
              <div class="stat-item">
                <div class="stat-value">75</div>
                <div class="stat-label">Trees</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">58</div>
                <div class="stat-label">Participants</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">✓</div>
                <div class="stat-label">Completed</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="event-btn view" onclick="viewEventDetails()">View Details</button>
            </div>
          </div>
        </div>
        
        <!-- Event Card 4 -->
        <div class="event-card">
          <div class="event-image" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');">
            <div class="event-status upcoming">Upcoming</div>
          </div>
          <div class="event-details">
            <h3 class="event-title">East Campus Eco-Garden</h3>
            <div class="event-meta">
              <div class="event-meta-item">
                <i class="fas fa-calendar"></i> Sun, Nov 5, 2023
              </div>
              <div class="event-meta-item">
                <i class="fas fa-clock"></i> 10:00 AM - 2:00 PM
              </div>
              <div class="event-meta-item">
                <i class="fas fa-map-marker-alt"></i> East Garden
              </div>
            </div>
            <p class="event-description">Help establish our new eco-garden with fruit trees and native plants. Perfect for students interested in sustainable agriculture.</p>
            <div class="event-stats">
              <div class="stat-item">
                <div class="stat-value">30</div>
                <div class="stat-label">Trees</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">15/30</div>
                <div class="stat-label">Participants</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">11</div>
                <div class="stat-label">Days Left</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="event-btn joined">
                <i class="fas fa-check"></i> Joined
              </button>
              <button class="event-btn view" onclick="viewEventDetails()">Details</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Event Details Page -->
  <div id="event-detail-page" class="page-container">
    <div class="event-detail-container">
      <div class="event-banner" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80');">
        <div class="event-header">
          <h1 class="event-title-large">Main Campus Tree Planting Day</h1>
          <p class="event-subtitle">Join us in making our campus greener, one tree at a time</p>
          <div class="event-header-meta">
            <div class="event-meta-item">
              <i class="fas fa-calendar"></i> Saturday, October 28, 2023
            </div>
            <div class="event-meta-item">
              <i class="fas fa-clock"></i> 8:00 AM - 12:00 PM
            </div>
            <div class="event-meta-item">
              <i class="fas fa-map-marker-alt"></i> Main Quad, BPSU Main Campus
            </div>
          </div>
        </div>
      </div>
      
      <div class="event-detail-content">
        <div class="event-section">
          <h2>About This Event</h2>
          <p class="event-description-detail">
            Join the Environmental Club for our annual campus tree planting event! We'll be planting 50 native trees around the Main Quad to enhance biodiversity and create more green spaces for students to enjoy. This event is open to all students, faculty, and staff. No prior experience is necessary - our team will provide all tools and training on-site. Help us make our campus more sustainable while learning about native tree species and their environmental benefits.
          </p>
          
          <div class="event-info-grid">
            <div class="info-card">
              <h3><i class="fas fa-tasks"></i> What to Bring</h3>
              <p>- Comfortable clothing and closed-toe shoes<br>
                 - Reusable water bottle<br>
                 - Sunscreen and hat<br>
                 - Gardening gloves (we'll provide if you don't have)</p>
            </div>
            
            <div class="info-card">
              <h3><i class="fas fa-clipboard-check"></i> Requirements</h3>
              <p>- Open to all BPSU students<br>
                 - No experience needed<br>
                 - Registration required<br>
                 - Physical waiver form to be signed on-site</p>
            </div>
            
            <div class="info-card">
              <h3><i class="fas fa-tree"></i> Tree Species</h3>
              <p>- Narra (Pterocarpus indicus)<br>
                 - Molave (Vitex parviflora)<br>
                 - Banaba (Lagerstroemia speciosa)<br>
                 - Kamagong (Diospyros blancoi)</p>
            </div>
            
            <div class="info-card">
              <h3><i class="fas fa-user-friends"></i> Organized By</h3>
              <p>BPSU Environmental Club<br>
                 Contact: Maria Santos<br>
                 Email: env.club@bpsu.edu<br>
                 Phone: (123) 456-7890</p>
            </div>
          </div>
        </div>
        
        <div class="event-section">
          <h2>Event Schedule</h2>
          <div class="info-card">
            <h3><i class="fas fa-clock"></i> Timeline</h3>
            <p>
              <strong>8:00 - 8:30 AM:</strong> Registration & Welcome<br>
              <strong>8:30 - 9:00 AM:</strong> Safety Briefing & Tree Planting Workshop<br>
              <strong>9:00 - 11:30 AM:</strong> Tree Planting Activity<br>
              <strong>11:30 AM - 12:00 PM:</strong> Cleanup & Group Photo<br>
              <strong>12:00 PM:</strong> Lunch Provided (Vegetarian options available)
            </p>
          </div>
        </div>
        
        <div class="event-section">
          <div class="participants-section">
            <div class="participants-header">
              <h2>Participants (24/50)</h2>
              <button class="event-btn join" onclick="joinEvent(this)">Join Event</button>
            </div>
            
            <div class="participants-grid">
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="participant-name">Maria Santos</div>
                <div class="participant-role">Organizer</div>
              </div>
              
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="participant-name">Juan Dela Cruz</div>
                <div class="participant-role">Volunteer</div>
              </div>
              
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="participant-name">Anna Reyes</div>
                <div class="participant-role">Volunteer</div>
              </div>
              
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="participant-name">Carlos Gomez</div>
                <div class="participant-role">Volunteer</div>
              </div>
              
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="participant-name">Sofia Martinez</div>
                <div class="participant-role">Volunteer</div>
              </div>
              
              <div class="participant-card">
                <div class="participant-avatar">
                  <i class="fas fa-user-plus"></i>
                </div>
                <div class="participant-name">You?</div>
                <div class="participant-role">Join now!</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="action-section">
          <button class="action-btn joined">
            <i class="fas fa-check"></i> You've Joined This Event
          </button>
          <button class="action-btn share">
            <i class="fas fa-share-alt"></i> Share Event
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Login Page -->
  <div id="login-page" class="page-container">
    <div class="login-container">
      <div class="login-header">
        <h2>Welcome Back</h2>
        <p>Sign in to your SustainBPSU account</p>
      </div>
      
      <form class="login-form">
        <div class="form-group">
          <label for="email">Email or Username</label>
          <input type="text" id="email" placeholder="Enter your email or username">
        </div>
        
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter your password">
        </div>
        
        <div class="login-options">
          <div class="remember-me">
            <input type="checkbox" id="remember">
            <label for="remember">Remember me</label>
          </div>
          <a href="#" class="forgot-password">Forgot password?</a>
        </div>
        
        <button type="button" class="btn-login" onclick="login()">Log in</button>
      </form>
      
      <div class="signup-link">
        Don't have an account? <a href="#" onclick="showPage('register-page')">Register now</a>
      </div>
    </div>
  </div>
  
  <!-- Register Page -->
  <div id="register-page" class="page-container">
    <div class="register-container">
      <div class="register-header">
        <h2>Create Account</h2>
        <p>Join SustainBPSU to make a difference</p>
      </div>
      
      <form class="login-form">
        <div class="form-group">
          <label for="reg-name">Full Name</label>
          <input type="text" id="reg-name" placeholder="Enter your full name">
        </div>
        
        <div class="form-group">
          <label for="reg-email">Email</label>
          <input type="email" id="reg-email" placeholder="Enter your email">
        </div>
        
        <div class="form-group">
          <label for="reg-username">Username</label>
          <input type="text" id="reg-username" placeholder="Choose a username">
        </div>
        
        <div class="form-group">
          <label for="reg-password">Password</label>
          <input type="password" id="reg-password" placeholder="Create a password">
        </div>
        
        <div class="form-group">
          <label for="reg-confirm">Confirm Password</label>
          <input type="password" id="reg-confirm" placeholder="Confirm your password">
        </div>
        
        <button type="button" class="btn-login" onclick="register()">Create Account</button>
      </form>
      
      <div class="signup-link">
        Already have an account? <a href="#" onclick="showPage('login-page')">Log in</a>
      </div>
    </div>
  </div>
  
  <!-- Profile Page -->
  <div id="profile-page" class="page-container">
    <div class="profile-page-container">
      <div class="profile-banner">
        <div class="profile-actions">
          <button><i class="fas fa-cog"></i> Settings</button>
          <button><i class="fas fa-share-alt"></i> Share</button>
        </div>
        <img src="https://randomuser.me/api/portraits/lego/1.jpg" alt="User" class="avatar" id="profile-avatar">
      </div>
      
      <div class="profile-details">
        <div class="profile-name-large" id="profile-name-large">Guest User</div>
        <div class="profile-handle-large" id="profile-handle-large">@guest_user</div>
        <div class="profile-bio-large" id="profile-bio">
          Join SustainBPSU to start contributing to a greener campus!
        </div>
        
        <div class="profile-stats-large">
          <div class="stat-large">
            <div class="number" id="profile-posts">0</div>
            <div class="label">Posts</div>
          </div>
          <div class="stat-large">
            <div class="number">0</div>
            <div class="label">Events</div>
          </div>
          <div class="stat-large">
            <div class="number">0</div>
            <div class="label">Trees Planted</div>
          </div>
          <div class="stat-large">
            <div class="number">0</div>
            <div class="label">Badges</div>
          </div>
        </div>
        
        <div class="profile-tabs">
          <div class="profile-tab active" onclick="switchTab('activity')">Activity</div>
          <div class="profile-tab" onclick="switchTab('events')">Events</div>
          <div class="profile-tab" onclick="switchTab('badges')">Badges</div>
          <div class="profile-tab" onclick="switchTab('friends')">Friends</div>
          <div class="profile-tab" onclick="switchTab('settings')">Settings</div>
        </div>
        
        <div class="tab-content">
          <div class="tab-pane active" id="activity-tab">
            <h3>Recent Activity</h3>
            <div class="activity-grid" id="activity-grid"></div>
          </div>
          
          <div class="tab-pane" id="events-tab">
            <h3>Upcoming Events</h3>
            <div class="activity-card">
              <h4>Campus Tree Planting</h4>
              <p>Join us to plant 100 new trees around the main campus quad</p>
              <div class="activity-meta">
                <span>Oct 28, 2023 · 8 AM</span>
                <span>45 attendees</span>
              </div>
            </div>
            <div class="activity-card">
              <h4>Eco-Tech Workshop</h4>
              <p>Learn about sustainable technology solutions for campuses</p>
              <div class="activity-meta">
                <span>Nov 5, 2023 · 2 PM</span>
                <span>28 attendees</span>
              </div>
            </div>
          </div>
          
          <div class="tab-pane" id="badges-tab">
            <h3>Earned Badges</h3>
            <p>No badges earned yet. Complete activities to earn badges!</p>
          </div>
          
          <div class="tab-pane" id="friends-tab">
            <h3>Friends & Followers</h3>
            <p>No friends added yet. Connect with others to see them here!</p>
          </div>
          
          <div class="tab-pane" id="settings-tab">
            <h3>Account Settings</h3>
            <div class="settings-form">
              <!-- Add this to settings form -->
              <div class="form-group">
                <label for="avatar-url">Avatar URL</label>
                <div class="avatar-preview-container">
                  <img id="avatar-preview" src="" alt="Avatar Preview" class="avatar-preview">
                  <input type="text" id="avatar-url" placeholder="Enter avatar URL">
                </div>
              </div>
              <div class="form-group">
                <label for="display-name">Display Name</label>
                <input type="text" id="display-name" value="Guest User">
              </div>
              
              <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" value="guest_user">
              </div>
              
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="Enter your email">
              </div>
              
              <div class="form-group">
                <label for="bio">Bio</label>
                <textarea id="bio" rows="3">Join SustainBPSU to start contributing to a greener campus!</textarea>
              </div>
              <div class="form-group">
                <label for="department">Department</label>
                <input type="text" id="department" value="Guest User">
              </div>
              
              <h4>Change Password</h4>
              <div class="form-group">
                <label for="current-password">Current Password</label>
                <input type="password" id="current-password" placeholder="Enter current password">
              </div>
              
              <div class="form-group">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" placeholder="Enter new password">
              </div>
              
              <div class="form-group">
                <label for="confirm-password">Confirm New Password</label>
                <input type="password" id="confirm-password" placeholder="Confirm new password">
              </div>
              
              <div class="form-actions">
                <button type="button" class="btn-save" onclick="saveSettings()">Save Changes</button>
                <button type="button" class="btn-cancel" onclick="switchTab('activity')">Cancel</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Create Event Modal -->
  <div class="modal" id="create-event-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create New Tree Planting Event</h2>
        <button class="close-modal" onclick="closeCreateEventModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <form id="event-form">
          <div class="form-row">
            <div class="form-group">
              <label for="event-title">Event Title</label>
              <input type="text" id="event-title" placeholder="Event name" required>
            </div>
            
            <div class="form-group">
              <label for="event-location">Location</label>
              <input type="text" id="event-location" placeholder="Campus location" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="event-date">Date</label>
              <input type="date" id="event-date" required>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="start-time">Start Time</label>
                <input type="time" id="start-time" required>
              </div>
              
              <div class="form-group">
                <label for="end-time">End Time</label>
                <input type="time" id="end-time" required>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="event-campus">Campus</label>
              <select id="event-campus" required>
                <option value="">Select Campus</option>
                <option value="main">Main Campus</option>
                <option value="north">North Campus</option>
                <option value="south">South Campus</option>
                <option value="east">East Campus</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="participant-limit">Participant Limit</label>
              <input type="number" id="participant-limit" placeholder="Max participants" min="1">
            </div>
          </div>
          
          <div class="form-group">
            <label for="tree-count">Number of Trees</label>
            <input type="number" id="tree-count" placeholder="Estimated trees to plant" min="1" required>
          </div>
          
          <div class="form-group">
            <label for="tree-species">Tree Species</label>
            <input type="text" id="tree-species" placeholder="Species to be planted" required>
          </div>
          
          <div class="form-group">
            <label for="event-description">Event Description</label>
            <textarea id="event-description" placeholder="Describe your event..." required></textarea>
          </div>
          
          <div class="form-group">
            <label for="organizer">Organized By</label>
            <input type="text" id="organizer" placeholder="Organization or department" required>
          </div>
        </form>
      </div>
      
      <div class="modal-footer">
        <button class="modal-btn cancel" onclick="closeCreateEventModal()">Cancel</button>
        <button class="modal-btn submit" onclick="createNewEvent()">Create Event</button>
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>About SustainBPSU</h3>
        <p>SustainBPSU is a platform for students and organizations to collaborate on sustainability initiatives, track environmental impact, and create a greener campus community.</p>
      </div>
      
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul class="footer-links">
          <li><a href="#" onclick="showPage('landing-page')">Home</a></li>
          <li><a href="#" onclick="showPage('events-page')">Events</a></li>
          <li><a href="#">Organizations</a></li>
          <li><a href="#">Sustainability Map</a></li>
          <li><a href="#">Eco Quizzes</a></li>
          <li><a href="#">Tree Tracker</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Resources</h3>
        <ul class="footer-links">
          <li><a href="#">Sustainability Guides</a></li>
          <li><a href="#">Campus Initiatives</a></li>
          <li><a href="#">Eco Events Calendar</a></li>
          <li><a href="#">Volunteer Opportunities</a></li>
          <li><a href="#">Research Papers</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Contact Us</h3>
        <ul class="footer-links">
          <li><a href="#"><i class="fas fa-envelope"></i> contact@SustainBPSU.edu</a></li>
          <li><a href="#"><i class="fas fa-phone"></i> (123) 456-7890</a></li>
          <li><a href="#"><i class="fas fa-map-marker-alt"></i> BPSU Main Campus</a></li>
        </ul>
      </div>
    </div>
    
    <div class="copyright">
      © 2023 SustainBPSU | BPSU Environmental Sustainability Office Platform. All rights reserved.
    </div>
  </footer>
<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbzg-Q53llDVczjxgsC-dijiOGsRE-x9_QqyH27qclDDD5SxUWuWVvL94YUx-i7byLckGQ/exec";
    // Global variables
    let currentUser = null;
    
    // Initialize on DOM load
    document.addEventListener("DOMContentLoaded", () => {
  // 1. First define the ORIGINAL showPage function
  function showPage(pageId) {
    // Hide all pages
    document.querySelectorAll(".page-container").forEach((page) => {
      page.classList.remove("active");
    });

    // Show the requested page
    const targetPage = document.getElementById(pageId);
    if (targetPage) {
      targetPage.classList.add("active");
      window.scrollTo(0, 0);
    }
  }

  // 2. Save the original function before overriding
  const originalShowPage = showPage;

  // 3. Create the ENHANCED version that dispatches events
  showPage = function(pageId) {
    originalShowPage(pageId);
    document.dispatchEvent(new CustomEvent('pageChanged', {
      detail: { pageId }
    }));
  };

  // 4. Add event listeners
  document.querySelectorAll(".auth-btn.login").forEach(button => {
    button.addEventListener("click", () => showPage("login-page"));
  });
  
  document.querySelectorAll(".auth-btn.register").forEach(button => {
    button.addEventListener("click", () => showPage("register-page"));
  });

  document.querySelectorAll(".nav-icon").forEach(icon => {
    icon.addEventListener("click", (e) => {
      const target = e.currentTarget.getAttribute("data-target");
      if (target) showPage(target);
    });
  });

  // 5. Add pageChanged event listener BEFORE initializing
  document.addEventListener('pageChanged', (e) => {
    if (e.detail.pageId === 'events-page') {
      loadEvents();
    }
  });

  // 6. Initialize the page (ONCE)
  showPage("landing-page");
    const savedUser = localStorage.getItem('currentUser');
    if (savedUser) {
      const user = JSON.parse(savedUser);
      document.getElementById('avatar-preview').src = user.avatar;
    }
});
// Update preview when URL changes
  document.getElementById('avatar-url').addEventListener('input', function() {
    document.getElementById('avatar-preview').src = this.value;
});
    // Create a new post
    async function createPost() {
      const content = document.getElementById('post-content').value.trim();
      if (!content) {
        alert('Please add content to post');
        return;
      }
      
      if (!currentUser) {
        alert('Please login to create a post');
        showPage('login-page');
        return;
      }
      
      try {
        // Create post object
        const post = {
          userId: currentUser.id,
          userName: currentUser.name,
          userAvatar: currentUser.avatar,
          content: content,
          timestamp: new Date().toISOString(),
          likes: 0,
          comments: 0,
          shares: 0
        };
        
        // Add the post to the feed
        addPostToFeed(post);
        
        // Reset form
        document.getElementById('post-content').value = '';
        
        // Show success message
        alert('Post created successfully!');
      } catch (error) {
        alert('Error creating post: ' + (error.message || error));
      }
    }
    
    // Add post to feed
    function addPostToFeed(postData) {
      const postsContainer = document.getElementById('posts-container');
      
      const postElement = document.createElement('div');
      postElement.className = 'post';
      postElement.innerHTML = `
        <div class="post-header">
          <div class="post-user">
            <img src="${postData.userAvatar}" alt="User" class="post-avatar">
            <div class="post-user-info">
              <h3>${postData.userName}</h3>
              <p>${formatDate(postData.timestamp)}</p>
            </div>
          </div>
        </div>
        <div class="post-content">
          <p>${postData.content}</p>
        </div>
        <div class="post-stats">
          <div><span class="like-count">${postData.likes}</span> Likes</div>
          <div><span class="comment-count">${postData.comments}</span> Comments</div>
          <div><span class="share-count">${postData.shares}</span> Shares</div>
        </div>
        <div class="post-actions">
          <div class="post-action" onclick="toggleLike(this)">
            <i class="far fa-heart"></i> Like
          </div>
          <div class="post-action">
            <i class="far fa-comment"></i> Comment
          </div>
          <div class="post-action" onclick="sharePost(this)">
            <i class="fas fa-retweet"></i> Share
          </div>
          <div class="post-action" onclick="toggleSave(this)">
            <i class="far fa-bookmark"></i> Save
          </div>
        </div>
      `;
      
      // Insert post at the top of the feed
      if (postsContainer.children.length > 0) {
        postsContainer.insertBefore(postElement, postsContainer.firstChild);
      } else {
        postsContainer.appendChild(postElement);
      }
    }
    
    // Format date for display
    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffHours = Math.abs(now - date) / 36e5;
      
      if (diffHours < 1) {
        return Math.round(diffHours * 60) + 'm ago';
      } else if (diffHours < 24) {
        return Math.round(diffHours) + 'h ago';
      } else {
        return date.toLocaleDateString();
      }
    }
    
    // Load posts (dummy data)
    async function loadPosts() {
      const postsContainer = document.getElementById('posts-container');
      postsContainer.innerHTML = '';
      
      // Add some dummy posts
      const dummyPosts = [
        {
          userId: 'admin',
          userName: 'BPSU Admin',
          userAvatar: 'https://randomuser.me/api/portraits/lego/1.jpg',
          content: 'Welcome to SustainBPSU! Our campus tree planting event starts tomorrow at 8AM in the main quad.',
          timestamp: new Date(Date.now() - 3600000).toISOString(),
          likes: 24,
          comments: 5,
          shares: 3
        },
        {
          userId: 'eco-club',
          userName: 'Environmental Club',
          userAvatar: 'https://randomuser.me/api/portraits/lego/2.jpg',
          content: 'Join our plastic recycling drive this Friday! Bring your clean plastic waste to the student center.',
          timestamp: new Date(Date.now() - 86400000).toISOString(),
          likes: 42,
          comments: 12,
          shares: 8
        }
      ];
      
      // Add posts to feed
      dummyPosts.forEach(post => {
        addPostToFeed(post);
      });
    }
    
    // Show page function
    function showPage(pageId) {
      // Hide all pages
      document.querySelectorAll(".page-container").forEach((page) => {
        page.classList.remove("active");
      });

      // Show the requested page
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add("active");
        window.scrollTo(0, 0);
        
        // Load data for specific pages
        if (pageId === 'social-feed-page') {
          loadPosts();
        } else if (pageId === 'events-page') {
          loadEvents();
        }
      }
}
    
    // Update login state UI
    function updateLoginState() {
      if (currentUser) {
        document.getElementById('auth-buttons').style.display = 'none';
        document.getElementById('user-menu').style.display = 'block';
        document.getElementById('header-avatar').src = currentUser.avatar;
        document.getElementById('post-user-avatar').src = currentUser.avatar;
      } else {
        document.getElementById('auth-buttons').style.display = 'flex';
        document.getElementById('user-menu').style.display = 'none';
      }
    }
    
    // Update profile data
    function updateProfileData() {
      if (!currentUser) return;
      
      // Update all avatar images
      const avatars = document.querySelectorAll('.user-avatar, .profile-avatar, #profile-avatar');
      avatars.forEach(avatar => {
        avatar.src = currentUser.avatar;
      });
      
      // Update sidebar profile (social feed page)
      if (document.getElementById('profile-sidebar-name')) {
        document.getElementById('profile-sidebar-name').textContent = currentUser.name;
      }
      
      // Update profile page
      if (document.getElementById('profile-name-large')) {
        document.getElementById('profile-name-large').textContent = currentUser.name;
      }
      
      // Update handles
      if (document.getElementById('profile-sidebar-handle')) {
        document.getElementById('profile-sidebar-handle').textContent = `@${currentUser.username}`;
      }
      
      if (document.getElementById('profile-handle-large')) {
        document.getElementById('profile-handle-large').textContent = `@${currentUser.username}`;
      }
      
      // Update bios
      if (document.getElementById('profile-sidebar-bio')) {
        document.getElementById('profile-sidebar-bio').textContent = currentUser.bio;
      }
      
      if (document.getElementById('profile-bio-large')) {
        document.getElementById('profile-bio-large').textContent = currentUser.bio;
      }
      
      // Update settings form
      fillSettingsForm();
    }
    
    // Login function
    async function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'login',
            username: email,
            password: password
          })
        });
        const data = await response.json();
        
        if (data.success) {
          // Store user data and update UI
          currentUser = data.user;
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          updateLoginState();
          updateProfileData();
          showPage('landing-page');
        } else {
          alert('Login failed: ' + data.message);
        }
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }
    
    // Register function
// Update register function to use API
    async function register() {
      const name = document.getElementById('reg-name').value;
      const email = document.getElementById('reg-email').value;
      const username = document.getElementById('reg-username').value;
      const password = document.getElementById('reg-password').value;
      const confirm = document.getElementById('reg-confirm').value;
      
      if (!name || !email || !username || !password || !confirm) {
        alert('Please fill all fields');
        return;
      }
      
      if (password !== confirm) {
        alert('Passwords do not match');
        return;
      }
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'register',
            name: name,
            email: email,
            username: username,
            password: password,
            avatar: "https://randomuser.me/api/portraits/lego/1.jpg", // Default avatar
            department: "", // Start with no department
            bio: "New sustainability enthusiast" // Default bio
          })
        });
        
        const data = await response.json();
        
        if (data.success) {
          currentUser = {
            id: data.user.id,
            name: name,
            email: email,
            username: username,
            avatar: data.user.avatar,
            role: "student",
            department: "",
            bio: "New sustainability enthusiast"
          };
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          updateLoginState();
          updateProfileData();
          showPage('landing-page');
          alert('Registration successful! Welcome to SustainBPSU');
        } else {
          alert('Registration failed: ' + data.message);
        }
      } catch (error) {
        alert('Registration error: ' + error.message);
      }
    }
    
    // Logout function
    function logout() {
      currentUser = null;
      localStorage.removeItem('currentUser');
      updateLoginState();
      showPage('login-page');
    }
    
    function fillSettingsForm() {
      if (!currentUser) return;
      
      document.getElementById('display-name').value = currentUser.name;
      document.getElementById('username').value = currentUser.username;
      document.getElementById('email').value = currentUser.email;
      document.getElementById('bio').value = currentUser.bio;
      document.getElementById('avatar-url').value = currentUser.avatar;
    }
    // Save settings
    async function saveSettings() {
      if (!currentUser) return;
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            action: 'updateProfile',
            user_id: currentUser.id,  // Use snake_case
            name: document.getElementById('display-name').value,
            username: document.getElementById('username').value,
            email: document.getElementById('email').value,
            bio: document.getElementById('bio').value,
            avatar: document.getElementById('avatar-url').value,
            department: document.getElementById('department').value
          })
        });
        
        const data = await response.json();
        if (data.success) {
          // Update local user data
          currentUser.name = document.getElementById('display-name').value;
          currentUser.username = document.getElementById('username').value;
          currentUser.email = document.getElementById('email').value;
          currentUser.bio = document.getElementById('bio').value;
          currentUser.avatar = document.getElementById('avatar-url').value;
          
          localStorage.setItem('currentUser', JSON.stringify(currentUser));
          updateProfileData();
          alert('Profile updated successfully!');
        } else {
          alert('Update failed: ' + (data.message || 'Unknown error'));
        }
      } catch (error) {
        console.error('Update error:', error);
        alert('Error updating profile: ' + error.message);
      }
    }
    
    // Toggle like on a post
    function toggleLike(button) {
      const post = button.closest('.post');
      const heartIcon = button.querySelector('i');
      const likeCount = post.querySelector('.like-count');
      
      if(heartIcon.classList.contains('far')) {
        heartIcon.classList.replace('far', 'fas');
        heartIcon.style.color = '#f44336';
        likeCount.textContent = parseInt(likeCount.textContent) + 1;
      } else {
        heartIcon.classList.replace('fas', 'far');
        heartIcon.style.color = '';
        likeCount.textContent = parseInt(likeCount.textContent) - 1;
      }
    }
    
    // Share a post
    function sharePost(button) {
      const post = button.closest('.post');
      const shareCount = post.querySelector('.share-count');
      shareCount.textContent = parseInt(shareCount.textContent) + 1;
      
      alert('Post shared successfully!');
    }
    
    // Toggle save on a post
    function toggleSave(button) {
      const bookmarkIcon = button.querySelector('i');
      
      if(bookmarkIcon.classList.contains('far')) {
        bookmarkIcon.classList.replace('far', 'fas');
        bookmarkIcon.style.color = '#ff9800';
      } else {
        bookmarkIcon.classList.replace('fas', 'far');
        bookmarkIcon.style.color = '';
      }
    }
    
    // Log a tree
    async function logTree() {
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'logTree',
            user_id: currentUser.id,
            species: 'Narra', // Example species
            location: 'Main Campus'
          })
        });
        const data = await response.json();
        
        if (data.success) {
          const counter = document.getElementById('tree-counter');
          counter.textContent = parseInt(counter.textContent) + 1;
          alert('Tree logged successfully!');
        }
      } catch (error) {
        alert('Error logging tree: ' + error.message);
      }
    }
    
    // Switch profile tabs
    function switchTab(tabName) {
      // Update active tab
      document.querySelectorAll('.profile-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Show active pane
      document.querySelectorAll('.tab-pane').forEach(pane => {
        pane.classList.remove('active');
      });
      document.getElementById(tabName + '-tab').classList.add('active');
    }
    
    // Events functionality
    function viewEventDetails(eventId) {
      // Store event ID for detail page
      sessionStorage.setItem('currentEventId', eventId);
      showPage('event-detail-page');
      loadEventDetails();
    }
    
    function backToEvents() {
      showPage('events-page');
    }
    
    async function joinEvent(button) {
      if (!currentUser) {
        alert('Please login to join events');
        showPage('login-page');
        return;
      }
      
      const eventId = button.getAttribute('data-event-id');
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: JSON.stringify({
            action: 'joinEvent',
            event_id: eventId,
            user_id: currentUser.id
          })
        });
        
        const data = await response.json();
        
        if (data.success) {
          button.innerHTML = '<i class="fas fa-check"></i> Joined';
          button.classList.remove('join');
          button.classList.add('joined');
          alert('You have successfully joined this event!');
        } else {
          alert('Failed to join event: ' + data.message);
        }
      } catch (error) {
        alert('Error joining event: ' + error.message);
      }
    }
    
    async function loadEvents() {
      try {
        const response = await fetch(`${API_URL}?action=getEvents`);
        const data = await response.json();
        
        if (data.success) {
          renderEvents(data.events);
        } else {
          console.error('Failed to load events:', data.message);
        }
      } catch (error) {
        console.error('Error loading events:', error);
      }
    }

    function renderEvents(events) {
      const eventsGrid = document.querySelector('.events-grid');
      eventsGrid.innerHTML = '';
      
      events.forEach(event => {
        const eventCard = document.createElement('div');
        eventCard.className = 'event-card';
        eventCard.innerHTML = `
          <div class="event-image" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80');">
            <div class="event-status ${event.status}">${event.status.charAt(0).toUpperCase() + event.status.slice(1)}</div>
          </div>
          <div class="event-details">
            <h3 class="event-title">${event.title}</h3>
            <div class="event-meta">
              <div class="event-meta-item">
                <i class="fas fa-calendar"></i> ${formatEventDate(event.date)}
              </div>
              <div class="event-meta-item">
                <i class="fas fa-clock"></i> ${event.start_time} - ${event.end_time}
              </div>
              <div class="event-meta-item">
                <i class="fas fa-map-marker-alt"></i> ${event.location}
              </div>
            </div>
            <p class="event-description">${event.description}</p>
            <div class="event-stats">
              <div class="stat-item">
                <div class="stat-value">${event.tree_count}</div>
                <div class="stat-label">Trees</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${event.participants || 0}/${event.participant_limit}</div>
                <div class="stat-label">Participants</div>
              </div>
              <div class="stat-item">
                <div class="stat-value">${getDaysLeft(event.date)}</div>
                <div class="stat-label">Days Left</div>
              </div>
            </div>
            <div class="event-actions">
              <button class="event-btn join" data-event-id="${event.id}" onclick="joinEvent(this)">Join Event</button>
              <button class="event-btn view" onclick="viewEventDetails('${event.id}')">Details</button>
            </div>
          </div>
        `;
        eventsGrid.appendChild(eventCard);
      });
    }

    // Helper functions
    function formatEventDate(dateString) {
      const options = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };
      return new Date(dateString).toLocaleDateString('en-US', options);
    }

    function getDaysLeft(eventDate) {
      const today = new Date();
      const eventDay = new Date(eventDate);
      const diffTime = eventDay - today;
      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    // Create event modal functions
    function openCreateEventModal() {
      document.getElementById('create-event-modal').style.display = 'flex';
    }
    
    function closeCreateEventModal() {
      document.getElementById('create-event-modal').style.display = 'none';
    }
    
    // Create new event functionality
    async function createNewEvent() {
      const eventData = {
        action: 'createEvent',
        title: document.getElementById('event-title').value,
        location: document.getElementById('event-location').value,
        date: document.getElementById('event-date').value,
        start_time: document.getElementById('start-time').value,
        end_time: document.getElementById('end-time').value,
        campus: document.getElementById('event-campus').value,
        tree_count: document.getElementById('tree-count').value,
        participant_limit: document.getElementById('participant-limit').value,
        description: document.getElementById('event-description').value,
        organizer_id: currentUser.id
      };
      
      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          body: JSON.stringify(eventData)
        });
        const data = await response.json();
        
        if (data.success) {
          alert('Event created successfully!');
          closeCreateEventModal();
          // Refresh events list
          loadEvents();
        }
      } catch (error) {
        alert('Error creating event: ' + error.message);
      }
    }

    // Add this function to load events
    async function loadEvents() {
      try {
        const response = await fetch(`${API_URL}?action=getEvents`);
        const data = await response.json();
        
        if (data.success) {
          // Render events to the page
          renderEvents(data.events);
        }
      } catch (error) {
        console.error('Error loading events:', error);
      }
    }
  </script>
</body>
</html>